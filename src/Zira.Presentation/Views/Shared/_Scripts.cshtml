<script src="~/dashboard/assets/vendor/libs/jquery/jquery.js"></script>
<script src="~/dashboard/assets/vendor/libs/popper/popper.js"></script>
<script src="~/dashboard/assets/vendor/js/bootstrap.js"></script>
<script src="~/dashboard/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
<script src="~/dashboard/assets/vendor/js/menu.js"></script>
<!-- jQuery (required for Toastr) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Toastr JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<!-- endbuild -->

<!-- Vendors JS -->
<script src="~/dashboard/assets/vendor/libs/apex-charts/apexcharts.js"></script>

<!-- Main JS -->
<script src="~/dashboard/assets/js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<!-- Page JS -->
<script src="~/dashboard/assets/js/dashboards-analytics.js"></script>

<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<script>
    const connection = new signalR.HubConnectionBuilder()
        .withUrl("/notificationHub")
        .build();

    connection.on("ReceiveNotification", function (message) {
        console.log(message);

        // Create toast notification
        const toast = document.createElement('div');
        toast.className = 'toast show';
        toast.style.position = 'fixed';
        toast.style.top = '20px';
        toast.style.right = '20px';
        toast.style.backgroundColor = '#333';
        toast.style.color = 'white';
        toast.style.padding = '15px';
        toast.style.borderRadius = '5px';
        toast.style.zIndex = '1000';
        toast.innerHTML = message;

        document.body.appendChild(toast);

        // Remove after 5 seconds
        setTimeout(() => {
            toast.remove();
        }, 5000);
    });

    connection.start().then(() => {
        console.log("SignalR connection established.");

        // You can now safely send notifications
        // connection.invoke("SendNotification", userId, "Your message").catch(err => console.error(err.toString()));
    }).catch(function (err) {
        console.error("Error starting SignalR connection: " + err.toString());
    });

</script>