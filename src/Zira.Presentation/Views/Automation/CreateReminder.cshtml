@model Zira.Presentation.Models.ReminderViewModel

@{
    ViewData["Title"] = "Create Reminder";
    Layout = "Shared/_AutomationLayout";
}

<!-- Page Content -->
<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4 d-flex align-items-center gap-2">
        <i class="bx bx-bell text-primary"></i> Create Reminder
    </h4>

    <div class="card shadow-lg border-0">
        <h5 class="card-header bg-white py-3 px-4">New Reminder</h5>
        <div class="card-body p-4">
            <form id="reminderForm" method="post" asp-action="CreateReminder">
                <div class="mb-3">
                    <label asp-for="Title">Title</label>
                    <input asp-for="Title" class="form-control" required/>
                    <span asp-validation-for="Title" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Remark">Remark</label>
                    <textarea asp-for="Remark" class="form-control"></textarea>
                    <span asp-validation-for="Remark" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="Amount">Amount</label>
                    <input asp-for="Amount" type="number" class="form-control" required/>
                    <span asp-validation-for="Amount" class="text-danger"></span>
                </div>

                <div class="mb-3">
                    <label asp-for="DueDate">Due Date</label>
                    <input asp-for="DueDate" type="date" class="form-control" required/>
                    <span asp-validation-for="DueDate" class="text-danger"></span>
                </div>

                <button type="submit" class="btn btn-primary">Save Reminder</button>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script>
    $(document).ready(function () {
        var title = '@TempData["ReminderTitle"]';
        var remark = '@TempData["ReminderRemark"]';
        var dueDate = '@TempData["ReminderDueDate"]';
        var amount = '@TempData["ReminderAmount"]';

        if (title) {
            var toastHtml = `
        <div class="bs-toast toast fade show bg-success top-50 start-50 translate-middle" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <i class="bx bx-bell me-2"></i>
                <div class="me-auto fw-semibold">Reminder Created</div>
                <small>${dueDate}</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                <strong>${title}</strong><br>
                <span>Remark: ${remark}</span><br>
                <span>Amount: ${amount}</span>
            </div>
        </div>`;

            $('body').append(toastHtml);

            setTimeout(function () {
                $('.toast').toast('hide');
            }, 5000);
        }

        var errorMessage = '@TempData["ErrorMessage"]';
        if (errorMessage) {
            var errorToastHtml = `
        <div class="bs-toast toast fade show bg-danger top-50 start-50 translate-middle" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <i class="bx bx-bell me-2"></i>
                <div class="me-auto fw-semibold">Error</div>
                <small>Just Now</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                ${errorMessage}
            </div>
        </div>`;

            $('body').append(errorToastHtml);

            setTimeout(function () {
                $('.toast').toast('hide');
            }, 5000);
        }
    });


</script>